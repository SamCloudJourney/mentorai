# MentorAI — Project Brief (Recap)  
  
**What it is:** a 24/7 AI private tutor focused on GCSE/A‑Level + Languages (text‑first MVP, voice later).  
  
**Promise:** cheaper than private tutors, consistent quality, adaptive learning, exam‑style feedback, and professional/education‑only boundaries.  
  
**Go‑to‑market:** Student (£9.99/mo), Family (£19.99/mo), Schools (later).  
  
**Build workflow:** Code in GitHub, deploy on Vercel (Next.js front + serverless API). Supabase for auth/data. Voice (ElevenLabs/Whisper) added in v2.  
  
## Product Design — Experience & UX  
  
### 1. Core user journeys  
  
- **Onboard → Goal set → First lesson**: pick subjects → set goals (exam board, target grade, time/week) → diagnostic quiz → personalized plan.  
- **Daily study loop**: open dashboard → “Continue lesson” → tutor chat (explain/quiz/feedback) → XP & streak → quick recap.  
- **Review & mastery**: “Weak topics” list → targeted drills → mastery check → weekly report.  
- **(Later) Parent/Teacher view**: progress over time, weak areas, suggested actions.  
  
### 2. Screens & layout  
  
- **A. Welcome / Onboarding**: minimal form (subjects, exam board, goals, availability), diagnostic start.  
- **B. Dashboard**: header with greeting + XP/streak; primary CTA “Continue lesson”; cards for Subjects, Weak Topics, Upcoming Plan, Recent Activity.  
- **C. Tutor Chat**: left panel for chat stream (messages, lesson cards, quizzes); right context panel (objectives, formula sheet, hints, scratchpad); controls for answer input (math mode supported), “check answer,” “explain another way,” “I need a hint.”  
- **D. Review & Progress**: weak topics chips → drill sets; charts (XP over time, accuracy by topic, time spent); download weekly recap PDF (later).  
- **E. Settings / Profile**: exam board, year/level, subjects, study schedule, notification prefs.  
  
### 3. Visual & brand system  
  
- **Tone:** calm, encouraging, professional mentor.  
- **Palette:** Teal #2AC5A3 (primary), Charcoal #1E1E2A (text), Off‑white #F8F9FB (background), Accent Yellow #FFD66B (success/gamify).  
- **Typography:** Inter (UI), Rubik (headings optional).  
- **Components:** Button (primary/ghost), Card, Chip, Progress/XP bar, Badge (topic level), Chart (weekly XP), Toast.  
- **Motion:** subtle micro‑animations (typing dots, XP gain, card swipes) via Framer Motion.  
- **Empty states:** “No weak topics yet—do a quick diagnostic.”  
  
### 4. Content & voice guardrails  
  
- **System prompt:** “You are MentorAI, a professional education‑only tutor… stay on‑topic, cite steps, offer hints before answers, adapt difficulty, never role‑play or discuss non‑educational topics.”  
- **Always provide:** worked solution → recap → next tiny task.  
- **Safety:** deflect non‑educational queries with a friendly redirect to goals.  
  
## Information Architecture  
  
### Entities  
  
- **User:** id, role (student/parent/teacher), profile, locale.  
- **Subject:** math, english, biology, spanish, etc.  
- **Topic:** nested per subject (e.g., Algebra → Quadratics).  
- **LessonPlan:** date, objectives, tasks, resources.  
- **Session:** chat turns, quiz attempts, tokens used, duration.  
- **Assessment:** diagnostic/quiz, items, score, rubric feedback.  
- **Progress:** mastery score per topic (0–100), last_seen, streak, XP.  
  
### Data model (Supabase tables – MVP)  
  
- `users(id, email, role, created_at)`  
- `profiles(user_id FK, name, country, school_year, exam_board, goals_json)`  
- `subjects(id, slug, name)`  
- `topics(id, subject_id FK, name, parent_topic_id FK)`  
- `progress(user_id FK, topic_id FK, mastery INT, last_seen TIMESTAMP)`  
- `sessions(id, user_id, subject_id, started_at, ended_at, tokens_in INT, tokens_out INT)`  
- `messages(id, session_id FK, role ENUM('user','assistant','system'), content JSONB, created_at)`  
- `assessments(id, user_id, subject_id, type ENUM('diagnostic','quiz','exam'), score INT, detail JSONB, created_at)`  
- `plans(id, user_id, week_start, plan_json)`  // auto‑generated by planner agent  
  
## Interaction Design — Lesson Flow (MVP)  
  
- **Diagnostic (per subject):** 6–10 mixed‑difficulty items → estimate mastery per topic cluster.  
- **Adaptive loop:** select next item using ELO/IRT‑lite targeting ~65–80% success for flow; if incorrect → hint → simpler scaffold → re‑try → then explanation.  
- **Tutor turn structure:** brief explanation → ask a question → evaluate user answer → targeted feedback → micro‑recap → pick next.  
- **Session end:** 3‑bullet summary, 1‑min drill suggestion, XP/streak update.  
  
## System Architecture (Vercel‑first)  
  
- **Frontend:** Next.js 15, App Router, Server Actions, Tailwind, Framer Motion.  
- **APIs:** Next.js serverless routes under `/app/api/*` (Vercel Functions). Benefits: no separate backend to start; easy secrets/env; low latency.  
- **DB/Auth:** Supabase (Auth, RLS, PostgREST).  
- **AI:** OpenAI (GPT‑4o‑mini / GPT‑4‑Turbo) via serverless routes.  
- **(v2 voice):** ElevenLabs (TTS), Whisper (STT).  
- **Analytics:** PostHog (events: session_start, question_answered, xp_awarded).  
- **Payments (v2):** Stripe (student/family), Lemon Squeezy alternative.  
  
### Repo layout  
  
```  
/ (monorepo optional)  
  /app              # Next.js app router  
    /dashboard  
    /learn  
    /review  
    /settings  
    /api  
      /ask/route.ts           # tutor turn  
      /quiz/route.ts          # generate/evaluate items  
      /plan/route.ts          # weekly plan (planner agent)  
  /lib  
    ai.ts                     # OpenAI client, prompts  
    supabase.ts               # client/server helpers  
    adapt.ts                  # difficulty/mastery logic  
  /styles  
  /public  
  /docs  
    product-brief.md          # this document  
    ux-wireframes.md  
    data-model.md  
```  
  
## API contract (serverless routes)  
  
- **POST `/api/ask`**  
  - **Body:** `{ userId, subjectId, topicId?, message, history[], contextPanel? }`  
  - **Returns:** `{ reply, nextAction?: 'quiz'|'explain'|'drill', hints?:[], sources?:[] }`  
  
- **POST `/api/quiz`**  
  - **Body:** `{ userId, subjectId, topicId, difficulty }`  
  - **Returns:** `{ itemId, prompt, answerSchema, solutionSteps }`  
  
- **POST `/api/quiz/grade`**  
  - **Body:** `{ itemId, userAnswer, answerSchema }`  
  - **Returns:** `{ correct: boolean, feedback, masteryDelta }`  
  
- **POST `/api/plan`**  
  - **Body:** `{ userId, horizonWeeks: 1|2|4 }`  
  - **Returns:** `{ plan: { week_start, sessions: [ {subject, topics, goals} ] } }`  
  
## Prompt design (MVP)  
  
- **System (tutor):**  
  “You are MentorAI, a professional, patient, education‑only tutor for GCSE/A‑Level and Languages.  
  Rules: (1) stay on‑topic; (2) explain step‑by‑step; (3) ask focused questions; (4) offer hints before answers; (5) adapt difficulty to keep the learner in flow; (6) finish with a one‑sentence recap + a next tiny task.”  
  
- **Evaluation (grader):**  
  “Given the question, canonical answer schema, and the learner’s answer, return: {correct, feedback, masteryDelta}. Penalize reasoning gaps; reward method even if arithmetic slips.”  
  
- **Planner (weekly):**  
  “Given user progress (mastery by topic, streaks, time budget, exam board), create a 7‑day plan with 15–25 minute sessions: {day, objective, topics, quiz_count, recap_task}. Prefer spaced repetition on weak topics.”  
  
## Gamification & motivation  
  
- **XP:** +10 correct, +5 partial, +2 attempt.  
- **Streak:** daily session completion (configurable timezone).  
- **Badges:** “Algebra Initiate,” “Essay Builder,” “Vocabulary 500+.”  
- **Mentor Moments:** weekly recap message + 1 goal for next week.  
  
## Versioning roadmap  
  
- **v0.1 (internal):** chat + static quizzes + local state.  
- **v0.2 (MVP live):** Supabase auth, adaptive quiz, progress, dashboard (Vercel).  
- **v0.3:** planner agent + weak‑topic drills + PDF recap.  
- **v0.4:** payments + invite codes + analytics.  
- **v1.0:** voice mode (TTS/STT), family plan, exportable reports.  
  
## Acceptance criteria (MVP)  
  
- New user can onboard, select subjects, finish a diagnostic.  
- Tutor chat can explain and quiz, evaluate answers, and adapt difficulty.  
- Dashboard shows XP, streak, weak topics, and Continue CTA.  
- Data persists in Supabase; RLS enforced; PII protected.  
- Deployed on Vercel with environment variables & observability (logs + events).  
  
## Next actions (design‑first)  
  
- **Wireframes (low‑fi):** onboarding, dashboard, tutor chat, review — in Figma.  
- **Component kit:** Buttons, Cards, Chips, Progress, Chat bubbles, Quiz card.  
- **Design tokens:** colors, spacing, shadows, radii, motion durations.  
- **Interaction spec:** response timings, typing indicator, hint reveal, XP animation.  
- **Empty/error states & loading skeletons.**  
  
If you want, I can now produce:  
  
- a component inventory with Tailwind class maps, and  
- low‑fi wireframe descriptions (screen‑by‑screen) you can hand straight to a designer or start building against.
